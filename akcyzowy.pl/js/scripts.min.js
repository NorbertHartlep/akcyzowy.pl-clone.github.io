(function (t) {
    "use strict";
    var n = function (n) {
        return this.each(function () {
            var e, i, a = t(this),
                o = a.data(),
                c = [a],
                r = this.tagName,
                s = 0;
            e = t.extend({
                content: "body",
                headings: "h1,h2,h3"
            }, {
                content: o.toc || void 0,
                headings: o.tocHeadings || void 0
            }, n), i = e.headings.split(","), t(e.content).find(e.headings).attr("id", function (n, e) {
                var i = function (t) {
                    0 === t.length && (t = "?");
                    for (var n = t.replace(/\s+/g, "_"), e = "", i = 1; null !== document.getElementById(n + e);) e = "_" + i++;
                    return n + e
                };
                return e || i(t(this).text())
            }).each(function () {
                var n = t(this),
                    e = t.map(i, function (t, e) {
                        return n.is(t) ? e : void 0
                    })[0];
                if (e > s) {
                    var a = c[0].children("li:last")[0];
                    a && c.unshift(t("<" + r + "/>").appendTo(a))
                } else c.splice(0, Math.min(s - e, Math.max(c.length - 1, 0)));
                t("<li/>").appendTo(c[0]).append(t("<a/>").text(n.text()).attr("href", "#" + n.attr("id"))), s = e
            })
        })
    };

    var e = t.fn.toc;
    t.fn.toc = n;
    t.fn.toc.noConflict = function () {
        return t.fn.toc = e, this
    };

    t(function () {
        n.call(t("[data-toc]"));
    });

    // Blokowanie przeladowania strony dla formularzy
    t("form").on("submit", function (event) {
        event.preventDefault();
    });

})(jQuery);
